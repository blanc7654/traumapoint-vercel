"use strict";(()=>{var e={};e.id=845,e.ids=[845],e.modules={3480:(e,t,a)=>{e.exports=a(5600)},4721:(e,t,a)=>{a.r(t),a.d(t,{config:()=>f,default:()=>c,routeModule:()=>A});var l={};a.r(l),a.d(l,{default:()=>m});var n=a(3480),o=a(8667),r=a(6435);let s=JSON.parse('[{"name":"효성119안전센터","address":"인천광역시 계양구 효서로 96-1","lon":126.70646,"lat":37.52781,"type":"소방","level":"안전센터","tel":"032-541-0119"},{"name":"고잔119안전센터(공단소방서)","address":"인천광역시 남동구 남동서로 208","lon":126.693085,"lat":37.407828,"type":"소방","level":"소방서","tel":"032-470-7500"},{"name":"구월119안전센터(남동소방서)","address":"인천광역시 남동구 인주대로 714","lon":126.716875,"lat":37.449097,"type":"소방","level":"소방서","tel":"032-463-8306"},{"name":"논현119안전센터","address":"인천광역시 남동구 소래역로 109","lon":126.729696,"lat":37.405104,"type":"소방","level":"안전센터","tel":"032-439-2119"},{"name":"도림119안전센터","address":"인천광역시 남동구 비류대로 667","lon":126.709103,"lat":37.422415,"type":"소방","level":"안전센터","tel":"032-814-2119"},{"name":"소래119안전센터","address":"인천광역시 남동구 에코중앙로 86","lon":126.720508,"lat":37.386245,"type":"소방","level":"안전센터","tel":"032-432-0440"},{"name":"간석119안전센터","address":"인천광역시 남동구 경인로 621","lon":126.706628,"lat":37.465701,"type":"소방","level":"안전센터","tel":"032-431-1119"},{"name":"담방119안전센터","address":"인천광역시 남동구 매소홀로 1044","lon":126.738793,"lat":37.439474,"type":"소방","level":"안전센터","tel":"032-469-1119"},{"name":"만수119안전센터","address":"인천광역시 남동구 백범로 207","lon":126.725929,"lat":37.459751,"type":"소방","level":"안전센터","tel":"032-464-7290"},{"name":"서창119안전센터","address":"인천광역시 남동구 서창방산로 61","lon":126.751994,"lat":37.422464,"type":"소방","level":"안전센터","tel":"032-870-5259"},{"name":"만석119안전센터","address":"인천광역시 동구 제물량로 396","lon":126.62561,"lat":37.483546,"type":"소방","level":"안전센터","tel":"032-766-0119"},{"name":"송림119안전센터(인천중부소방서소속)","address":"인천광역시 동구 샛골로 133","lon":126.644299,"lat":37.47431,"type":"소방","level":"안전센터","tel":"032-764-7119"},{"name":"송현119안전센터","address":"인천광역시 동구 방축로 39","lon":126.650798,"lat":37.48606,"type":"소방","level":"안전센터","tel":"032-576-0119"},{"name":"신기119안전센터(미추홀소방서)","address":"인천광역시 미추홀구 인하로 190","lon":126.669312,"lat":37.448736,"type":"소방","level":"소방서","tel":"032-870-3290"},{"name":"관교119안전센터","address":"인천광역시 미추홀구 인하로 450","lon":126.696838,"lat":37.444444,"type":"소방","level":"안전센터","tel":"032-435-0119"},{"name":"도화119안전센터","address":"인천광역시 미추홀구 장고개로 85","lon":126.669608,"lat":37.475361,"type":"소방","level":"안전센터","tel":"032-864-9119"},{"name":"숭의119안전센터","address":"인천광역시 미추홀구 석정로49번길 30","lon":126.642804,"lat":37.464648,"type":"소방","level":"안전센터","tel":"032-888-9119"},{"name":"용현119안전센터","address":"인천광역시 미추홀구 독배로 376","lon":126.6483322,"lat":37.453323,"type":"소방","level":"안전센터","tel":"032-887-0119"},{"name":"주안119안전센터","address":"인천광역시 미추홀구 한나루로 607","lon":126.672611,"lat":37.460435,"type":"소방","level":"안전센터","tel":"032-862-1119"},{"name":"갈산119안전센터(부평소방서)","address":"인천광역시 부평구 부평대로 324","lon":126.721909,"lat":37.520253,"type":"소방","level":"소방서","tel":"032-515-0119"},{"name":"부개119안전센터","address":"인천광역시 부평구 부개로 6","lon":126.739405,"lat":37.497855,"type":"소방","level":"안전센터","tel":"032-361-2119"},{"name":"부흥119안전센터(부평소방서)","address":"인천광역시 부평구 부평대로 8","lon":126.723116,"lat":37.492088,"type":"소방","level":"안전센터","tel":"032-723-5354"},{"name":"산곡119안전센터","address":"인천광역시 부평구 마장로 198","lon":126.70282,"lat":37.495646,"type":"소방","level":"안전센터","tel":"032-513-0119"},{"name":"삼산119안전센터","address":"인천광역시 부평구 충선로 252","lon":126.735836,"lat":37.511605,"type":"소방","level":"안전센터","tel":"032-504-8119"},{"name":"십정119안전센터","address":"인천광역시 부평구 경원대로 1111","lon":126.697258,"lat":37.479987,"type":"소방","level":"안전센터","tel":"032-438-6119"},{"name":"가좌119안전센터","address":"인천광역시 서구 백범로678번길 17","lon":126.682853,"lat":37.482142,"type":"소방","level":"안전센터","tel":"032-578-0119"},{"name":"석남119안전센터","address":"인천광역시 서구 석남로 102","lon":126.672863,"lat":37.50077,"type":"소방","level":"안전센터","tel":"032-571-0119"},{"name":"신현119안전센터","address":"인천광역시 서구 가정로 333-1","lon":126.672763,"lat":37.514683,"type":"소방","level":"안전센터","tel":"032-572-0119"},{"name":"원창119안전센터","address":"인천광역시 서구 북항로32번길 47-5","lon":126.644983,"lat":37.510541,"type":"소방","level":"안전센터","tel":"032-577-0119"},{"name":"동춘119안전센터","address":"인천광역시 연수구 앵고개로 241","lon":126.671002,"lat":37.409307,"type":"소방","level":"안전센터","tel":"032-813-2119"},{"name":"옥련119안전센터","address":"인천광역시 연수구 청량로155번길 7","lon":126.651928,"lat":37.420845,"type":"소방","level":"안전센터","tel":"032-832-0119"},{"name":"국제119안전센터","address":"인천광역시 연수구 센트럴로 412","lon":126.628382,"lat":37.410449,"type":"소방","level":"안전센터","tel":"032-810-6693"},{"name":"신송119안전센터","address":"인천광역시 연수구 해돋이로 92","lon":126.651721,"lat":37.390669,"type":"소방","level":"안전센터","tel":"032-810-6683"},{"name":"인천중부소방서(중앙119안전센터)","address":"인천광역시 중구 인중로 204","lon":126.622128,"lat":37.46996,"type":"소방","level":"소방서","tel":"032-762-0119"},{"name":"연안119안전센터","address":"인천광역시 중구 축항대로118번길 108","lon":126.604511,"lat":37.446578,"type":"소방","level":"안전센터","tel":"032-887-4689"},{"name":"부천소방서(중앙119안전센터)[심곡출동대아님]","address":"경기도 부천시 원미구 신흥로 115","lon":126.778312,"lat":37.494031,"type":"소방","level":"소방서","tel":"032-650-4504"},{"name":"중동119안전센터","address":"경기도 부천시 원미구 부일로 346","lon":126.76877,"lat":37.487852,"type":"소방","level":"안전센터","tel":"032-655-0119"},{"name":"상동119안전센터","address":"경기도 부천시 원미구 장말로 113","lon":126.754509,"lat":37.494073,"type":"소방","level":"안전센터","tel":"032-322-0119"},{"name":"서부119안전센터","address":"경기도 부천시 원미구 계남로 169","lon":126.767943,"lat":37.507713,"type":"소방","level":"안전센터","tel":"032-650-4572"},{"name":"신상119안전센터","address":"경기도 부천시 원미구 상동로117번길 36","lon":126.751491,"lat":37.507885,"type":"소방","level":"안전센터","tel":"032-324-9119"},{"name":"은행119안전센터","address":"경기도 시흥시 대은로 4","lon":126.793076,"lat":37.439559,"type":"소방","level":"안전센터","tel":"031-310-0511"},{"name":"국제성모병원","address":"경기도 시흥시 대은로 4","lon":126.68282,"lat":37.542301,"type":"병원","level":"병원","tel":"032-1600-6119"}]'),i="15c28ebb75dda243548737ac615a5681",d={lat:37.448477,lon:126.701627};async function m(e,t){if(console.log("\uD83D\uDCE6 [traumapoint API] 시작됨"),"POST"!==e.method)return t.status(405).end();let{origin:a}=e.body;if(!a?.lat||!a?.lon)return console.log("❌ origin 누락",a),t.status(400).json({error:"Invalid origin"});try{let e=await p(a,d),l=await y(a,s),n=await y(d,s),o=await u(s,d);if(!l?.routes||!n?.routes||!o?.routes)throw Error("\uD83D\uDEA8 길찾기 응답 불완전");let r=v(l.routes),i=v(n.routes),m=v(o.routes),c=s.map(e=>{let t=String(e.id),a=r[t]?.summary?.duration??1/0,l=(i[t]?.summary?.duration??1/0)+900,n=m[t]?.summary?.duration??1/0;return{...e,eta119:a,etaDoc:l,etaGap:a-l,tpToGilETA:n,totalTransferTime:a+n}}).filter(t=>t.eta119<e&&t.etaDoc<t.eta119),f=c.filter(e=>e.etaGap>=600),A=c.filter(e=>e.etaGap>=300&&e.etaGap<600),T=c.filter(e=>e.etaGap>=180&&e.etaGap<300),h=[...f,...A,...T].sort((e,t)=>e.totalTransferTime-t.totalTransferTime).slice(0,5),P=c.filter(t=>t.totalTransferTime-e<300).sort((e,t)=>e.eta119-t.eta119).slice(0,5),g=c.filter(t=>t.totalTransferTime-e<600).sort((e,t)=>e.eta119-t.eta119).slice(0,5),G=e=>({id:e.id,name:e.name,address:e.address,phone:e.phone,eta119:e.eta119,etaDoc:e.etaDoc,etaGap:e.etaGap,tpToGilETA:e.tpToGilETA,totalTransferTime:e.totalTransferTime,lat:e.lat,lon:e.lon});t.status(200).json({recommendations:{column1:h.map(G),column2:P.map(G),column3:g.map(G)},directToGilETA:e})}catch(e){console.error("\uD83D\uDEA8 처리 실패:",e.message),t.status(500).json({error:e.message})}}async function p(e,t){let a=`https://apis-navi.kakaomobility.com/v1/directions?origin=${e.lon},${e.lat}&destination=${t.lon},${t.lat}&priority=RECOMMEND`,l=await fetch(a,{method:"GET",headers:{Authorization:`KakaoAK ${i}`}}),n=await l.json();if(!n.routes?.[0]?.summary)throw Error("❌ 단일 경로 요약 없음");return n.routes[0].summary.duration}async function y(e,t){let a={origin:{x:e.lon,y:e.lat},destinations:t.map(e=>({x:e.lon,y:e.lat,key:String(e.id)})),radius:5e4},l=await fetch("https://apis-navi.kakaomobility.com/v1/api/navi-affiliate/destinations/directions100",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`KakaoAK ${i}`},body:JSON.stringify(a)});return await l.json()}async function u(e,t){let a={origins:e.map(e=>({x:e.lon,y:e.lat,key:String(e.id)})),destination:{x:t.lon,y:t.lat},radius:5e4},l=await fetch("https://apis-navi.kakaomobility.com/v1/api/navi-affiliate/origins/directions100",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`KakaoAK ${i}`},body:JSON.stringify(a)});return await l.json()}function v(e){let t={};return e?.forEach(e=>{e?.key&&(t[e.key]=e)}),t}let c=(0,r.M)(l,"default"),f=(0,r.M)(l,"config"),A=new n.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/traumapoint",pathname:"/api/traumapoint",bundlePath:"",filename:""},userland:l})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return a}});var a=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=4721);module.exports=a})();